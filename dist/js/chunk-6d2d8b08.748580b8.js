(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6d2d8b08"],{"2b47":function(t,s,a){t.exports=a.p+"img/default.d8b77114.png"},"48ba":function(t,s,a){"use strict";a("91a1")},"656c":function(t,s,a){"use strict";a.d(s,"a",(function(){return n})),a.d(s,"b",(function(){return e}));var i=a("23a8");function n(t,s,a){return Object(i["a"])({url:"/top/playlist",params:{cat:t,limit:s,offset:a}})}function e(t){return Object(i["a"])({url:"/playlist/detail",params:{id:t}})}},7415:function(t,s,a){"use strict";a.r(s);var i=function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{staticClass:"playListDetail"},[""==t.songList?i("van-loading",{staticClass:"loading",attrs:{"text-color":"#999",color:"red",type:"spinner",size:"24px"}},[t._v("正在加载...")]):t._e(),""!==t.songList?i("div",[i("div",{class:["header",null==t.playListInfo.titleImageUrl&&t.isHidden?"header-gedan":""]},[i("div",{class:[null!==t.playListInfo.titleImageUrl?"left":"left-gedan"]},[i("i",{staticClass:"iconfont icon-arrowLeft",on:{click:t.backIndex}}),i("img",{attrs:{src:a("2b47"),alt:""}}),i("span",[t._v(t._s(null!==t.playListInfo.titleImageUrl?"官方动态歌单":"歌单"))])]),t._m(0)]),null!==t.playListInfo.titleImageUrl?i("div",{staticClass:"center"},[i("img",{class:["bg",t.isHidden?"bg2":""],attrs:{src:t.playListInfo.backgroundCoverUrl+"?param=500y500",alt:""}}),i("img",{class:["title",t.isHidden?"hidden":""],attrs:{src:t.playListInfo.titleImageUrl+"?param=500y500",alt:""}}),i("p",{class:["text1",t.isHidden?"hidden":""]},[t._v(t._s(t.playListInfo.updateFrequency))]),i("p",{class:["text2",t.isHidden?"hidden":""]},[t._v(t._s(t.playListInfo.description))])]):t._e(),null===t.playListInfo.titleImageUrl?i("div",{staticClass:"center2"},[i("img",{staticClass:"coverImg",attrs:{src:t.playListInfo.coverImgUrl+"?param=500y500",alt:""}}),i("div",{staticClass:"info"},[i("p",{staticClass:"name",attrs:{id:"name"}},[t._v(t._s(t.playListInfo.name))]),i("p",{staticClass:"user"},[i("img",{staticClass:"avatar",attrs:{src:t.playListInfo.avatarUrl+"?param=100y100",alt:""}}),t._v(" "+t._s(t.playListInfo.nickname))]),i("p",{staticClass:"description"},[t._v(t._s(t.playListInfo.description))])])]):t._e(),i("div",{class:[null!==t.playListInfo.titleImageUrl?"line":"line-gedan",t.isHidden?"hidden":""]},[i("div",{staticClass:"line-content"},[i("span",{staticClass:"iconfont icon-dingyue"}),i("span",{staticClass:"count"},[t._v(t._s(t.playListInfo.subscribedCount))]),i("span",{},[t._v("|")]),i("span",{staticClass:"iconfont icon-pinglun"}),i("span",{staticClass:"count"},[t._v(t._s(t.playListInfo.commentCount))]),i("span",{},[t._v("|")]),i("span",{staticClass:"iconfont icon-fenxiang"}),i("span",{staticClass:"count"},[t._v(t._s(t.playListInfo.commentCount))])])]),i("div",{class:[null!==t.playListInfo.titleImageUrl?"list-header":"list-header-gedan",t.isHidden?"list-header-fixed":""]},[i("div",{staticClass:"playBtn"},[i("div",{staticClass:"left"},[i("div",{staticClass:"left-icon"},[i("span",{staticClass:"iconfont icon-caret_right",on:{click:t.playAll}})]),i("span",[t._v("播放全部")]),i("span",{staticClass:"list-count"},[t._v("("+t._s(t.songList.length)+")")])]),t._m(1)])]),i("div",{ref:"pronbit",class:[null!==t.playListInfo.titleImageUrl?"main":"main-gedan"]},t._l(t.songList,(function(s,a){return i("div",{key:a,staticClass:"song"},[i("div",{staticClass:"item"},[i("div",{staticClass:"left",on:{click:function(i){return t.playThis(s.id,a)}}},[i("div",{staticClass:"text"},[i("span",[t._v(t._s(a+1))])]),i("div",{staticClass:"track"},[i("p",{staticClass:"name"},[t._v(t._s(s.name))]),i("p",{staticClass:"singer"},[t._v(t._s(t.artistsList[a]))])])]),t._m(2,!0)])])})),0)]):t._e()],1)},n=[function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"right"},[a("span",{staticClass:"iconfont icon-search"}),a("span",{staticClass:"iconfont icon-liebiao-dian"})])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"right"},[a("span",{staticClass:"iconfont icon-download"}),a("span",{staticClass:"iconfont icon-icon-test"})])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"icon"},[a("span",{staticClass:"iconfont icon-bofang"}),a("span",{staticClass:"iconfont icon-liebiao-dian"})])}],e=a("b85c"),l=a("1da1"),c=(a("96cf"),a("b0c0"),a("a4d3"),a("e01a"),a("a15b"),a("656c")),r=a("ff51"),o=a("456a"),d={data:function(){return{id:"",playListInfo:{coverImgUrl:"",backgroundCoverUrl:"",avatarUrl:"",name:"",nickname:"",titleImageUrl:"",updateFrequency:"",description:"",subscribedCount:"",commentCount:"",shareCount:""},trackIds:[],artistsList:[],songList:[],hasClcikMusicId:"",isHidden:!1,screenHeight:""}},mounted:function(){var t=this;this.id=this.$route.query.id,setTimeout((function(){t.getDetail()}),1500),window.addEventListener("scroll",this.handleScrollx,!0)},methods:{handleScrollx:function(){var t=this.$refs.pronbit.getBoundingClientRect().top;null!==this.playListInfo.titleImageUrl?this.isHidden=t<=130&&40!=t&&20!=t:this.isHidden=t<=170&&40!=t&&20!=t},getDetail:function(){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function s(){var a,i,n,l,o;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,Object(c["b"])(t.id);case 2:a=s.sent,i=a.data.playlist,t.playListInfo.backgroundCoverUrl=i.backgroundCoverUrl,t.playListInfo.coverImgUrl=i.coverImgUrl,t.playListInfo.avatarUrl=i.creator.avatarUrl,t.playListInfo.name=i.name,t.playListInfo.nickname=i.creator.nickname,t.playListInfo.name=i.name,t.playListInfo.titleImageUrl=i.titleImageUrl,t.playListInfo.updateFrequency=i.updateFrequency,t.playListInfo.description=i.description,t.playListInfo.subscribedCount=Object(r["b"])(i.subscribedCount),t.playListInfo.commentCount=Object(r["b"])(i.commentCount),t.playListInfo.shareCount=Object(r["b"])(i.shareCount),n=Object(e["a"])(a.data.playlist.trackIds);try{for(n.s();!(l=n.n()).done;)o=l.value,t.trackIds.push(o.id)}catch(d){n.e(d)}finally{n.f()}t.trackIds=t.trackIds.join(","),t.myGetMusicDetail();case 20:case"end":return s.stop()}}),s)})))()},myGetMusicDetail:function(){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function s(){var a,i,n,l,c,r,d,u,p;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,Object(o["c"])(t.trackIds);case 2:a=s.sent,i=Object(e["a"])(a.data.songs);try{for(i.s();!(n=i.n()).done;)l=n.value,t.songList.push({id:l.id,name:l.name,artists:l.ar[0].name,picUrl:l.al.picUrl})}catch(f){i.e(f)}finally{i.f()}for(c=0;c<t.songList.length;c++){r=[],d=Object(e["a"])(a.data.songs[c].ar);try{for(d.s();!(u=d.n()).done;)p=u.value,r.push(p.name),t.artistsList[c]=r.join(" / ")}catch(f){d.e(f)}finally{d.f()}}case 6:case"end":return s.stop()}}),s)})))()},backIndex:function(){this.$router.go(-1)},playThis:function(t,s){this.$store.state.playShow=!0;var a=Object(r["a"])(this.$store.state.playList,"id",t);if(-1!=a){if(this.hasClcikMusicId==t)return;this.$bus.$emit("receiveMusicId",t,a)}else{var i=this.$store.state.playList.length;this.$store.state.playList.push(this.songList[s]),this.$bus.$emit("receiveMusicId",t,i),this.hasClcikMusicId=t}},playAll:function(){var t=this;this.$store.state.playList=this.songList,this.$toast("已添加到播放列表"),setTimeout((function(){t.$store.state.playShow=!0,t.$bus.$emit("receiveMusicId",t.songList[0].id,0)}),1e3),localStorage.removeItem("newSong"),localStorage.setItem("newSong",JSON.stringify(this.songList))}},beforeDestroy:function(){window.removeEventListener("scroll",this.handleScrollx,!0)}},u=d,p=(a("48ba"),a("2877")),f=Object(p["a"])(u,i,n,!1,null,"0f33069e",null);s["default"]=f.exports},"91a1":function(t,s,a){},a15b:function(t,s,a){"use strict";var i=a("23e7"),n=a("44ad"),e=a("fc6a"),l=a("a640"),c=[].join,r=n!=Object,o=l("join",",");i({target:"Array",proto:!0,forced:r||!o},{join:function(t){return c.call(e(this),void 0===t?",":t)}})},a640:function(t,s,a){"use strict";var i=a("d039");t.exports=function(t,s){var a=[][t];return!!a&&i((function(){a.call(null,s||function(){throw 1},1)}))}}}]);
//# sourceMappingURL=chunk-6d2d8b08.748580b8.js.map