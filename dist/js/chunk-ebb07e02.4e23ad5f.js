(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ebb07e02"],{"124e":function(e,t,s){"use strict";s("b2fe")},"1ef7":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"container"},[s("div",{staticClass:"header"},[s("i",{staticClass:"iconfont icon-arrowLeft",on:{click:e.backIndex}}),s("input",{directives:[{name:"model",rawName:"v-model",value:e.searchContent,expression:"searchContent"}],ref:"input",attrs:{placeholder:e.hotSearchKey,type:"text"},domProps:{value:e.searchContent},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchDefaultKey.apply(null,arguments)},input:function(t){t.target.composing||(e.searchContent=t.target.value)}}}),s("i",{directives:[{name:"show",rawName:"v-show",value:e.searchContent.length,expression:"searchContent.length"}],staticClass:"clear",on:{click:e.clearSearchContent}},[e._v("X")])]),s("div",{directives:[{name:"show",rawName:"v-show",value:""==e.searchResultList&&e.showDefault&&!e.showSearchDetail,expression:"searchResultList==''&& showDefault && !showSearchDetail"}],staticClass:"content"},[s("div",{directives:[{name:"show",rawName:"v-show",value:""!=e.historyList,expression:"historyList== ''?false:true"}],staticClass:"history"},[s("div",{staticClass:"title"},[e._v("历史")]),e._l(e.historyList,(function(t){return s("div",{key:t,staticClass:"item",on:{click:function(t){return e.putSearch(t)}}},[e._v(" "+e._s(t)+" ")])})),s("div",{staticClass:"delete",on:{click:e.clearHistorySearch}},[s("van-icon",{attrs:{name:"delete-o"}})],1)],2),s("div",{class:["hotSearch",""==e.historyList?"active-margin":""]},[e._m(0),s("el-card",e._l(e.hotSearch,(function(t,a){return s("div",{key:a,staticClass:"hotSearchItem",on:{click:function(t){return e.putSearch(t)}}},[s("span",{class:a+1==1||a+1==2||a+1==3?"index":""},[e._v(e._s(a+1))]),s("span",{staticClass:"searchWord"},[e._v(e._s(t.searchWord))]),t.iconUrl?s("img",{attrs:{src:t.iconUrl}}):e._e()])})),0)],1)]),s("el-card",{directives:[{name:"show",rawName:"v-show",value:""!=e.searchResultList&&e.showSearchResult&&""!=e.searchContent,expression:"searchResultList!='' && showSearchResult&&searchContent!=''"}],staticClass:"result"},e._l(e.searchResultList,(function(t){return s("div",{key:t.id,staticClass:"item",on:{click:function(s){return e.toSearchDetail(t.name)}}},[s("span",{staticClass:"iconfont icon-search"}),s("span",[e._v(e._s(t.name))])])})),0),e.showSearchDetail&&""==e.searchResultList?s("searchDetail",{staticClass:"search-detail"}):e._e(),e.showSearchDetail&&""==e.searchResultList?s("router-view"):e._e()],1)},i=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"title"},[s("label",[e._v("热搜榜")])])}],n=s("b85c"),r=s("1da1"),c=(s("96cf"),s("ac1f"),s("1276"),s("b0c0"),s("498a"),s("a434"),s("d607")),h=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"searchDetail"},[s("van-tabs",{on:{click:e.handleChange},model:{value:e.active,callback:function(t){e.active=t},expression:"active"}},e._l(e.titleList,(function(e){return s("van-tab",{key:e.name,attrs:{title:e.name,name:e.id}})})),1)],1)},o=[],l={data:function(){return{titleList:[{id:"comprehensive",name:"综合"},{id:"songDetail",name:"单曲"},{id:"songListDetail",name:"歌单"},{id:"videoDetail",name:"视频"},{id:"singerDetail",name:"歌手"},{id:"albumDetail",name:"专辑"},{id:"userList",name:"用户"}],active:""}},mounted:function(){this.handelActive()},methods:{handleChange:function(e){this.$bus.$emit("handleChange",e),sessionStorage.setItem("activePage",this.active)},handelActive:function(){sessionStorage.getItem("activePage")?this.active=sessionStorage.getItem("activePage",this.active):this.active="comprehensive"}},beforeDestroy:function(){sessionStorage.clear("activePage")}},u=l,f=s("2877"),d=Object(f["a"])(u,h,o,!1,null,"22690af5",null),v=d.exports,m={components:{searchDetail:v},data:function(){return{searchContent:"",hotSearchKey:"",historyList:[],hotSearch:[],isSend:!1,searchResultList:[],showDefault:!0,showSearchDetail:!1,showSearchResult:!0,keyWords:""}},mounted:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var s,a,i,r,h,o,l,u;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(s=localStorage.getItem("historyList"),s&&(e.historyList=s.split(",")),a=JSON.parse(localStorage.getItem("hotSearchKey")),!a){t.next=7;break}e.hotSearchKey=a,t.next=12;break;case 7:return t.next=9,Object(c["a"])();case 9:i=t.sent,e.hotSearchKey=i.data.data.showKeyword,localStorage.setItem("hotSearchKey",JSON.stringify(e.hotSearchKey));case 12:if(r=JSON.parse(localStorage.getItem("hotSearch")),!r){t.next=17;break}e.hotSearch=r,t.next=23;break;case 17:return t.next=19,Object(c["b"])();case 19:h=t.sent,o=Object(n["a"])(h.data.data);try{for(o.s();!(l=o.n()).done;)u=l.value,e.hotSearch.push({searchWord:u.searchWord,iconUrl:u.iconUrl})}catch(f){o.e(f)}finally{o.f()}localStorage.setItem("hotSearch",JSON.stringify(e.hotSearch));case 23:e.$bus.$on("handleChange",e.handleChange);case 24:case"end":return t.stop()}}),t)})))()},methods:{getSearch:function(){var e=this;if(!this.isSend){this.isSend=!0,Object(c["c"])(this.searchContent,10,"",1).then((function(t){e.searchResultList=[];var s,a=Object(n["a"])(t.data.result.songs);try{for(a.s();!(s=a.n()).done;){var i=s.value;e.searchResultList.push({id:i.id,name:i.name})}}catch(r){a.e(r)}finally{a.f()}})),this.saveSearchContent();var t=this;setTimeout((function(){t.isSend=!1}),1e3)}},backIndex:function(){this.showSearchDetail?(this.showSearchDetail=!1,this.showDefault=!0,this.showSearchResult=!0):this.$router.push("/")},putSearch:function(e){this.showSearchResult=!1,this.searchContent=e.target.innerHTML.trim(),this.showSearchDetail=!0,this.$router.push({path:"/search/comprehensive",query:{key:this.searchContent}}),this.$refs.input.focus(),this.saveSearchContent()},saveSearchContent:function(){-1!==this.historyList.indexOf(this.searchContent.trim())&&this.historyList.splice(this.historyList.indexOf(this.searchContent),1),this.historyList.unshift(this.searchContent),localStorage.setItem("historyList",this.historyList)},clearSearchContent:function(){this.searchContent="",this.showSearchResult=!1,this.showDefault=!0,this.searchResultList="",this.$refs.input.focus(),this.searchResultList="",this.showSearchDetail=!1},clearHistorySearch:function(){var e=this;this.$dialog.confirm({title:"提示",message:"您确认清空所有搜索记录？"}).then((function(){e.historyList=[],localStorage.clear("historyList")})).catch((function(){}))},searchDefaultKey:function(){this.searchContent.trim()||(this.searchContent=this.hotSearchKey)},toSearchDetail:function(e){this.keyWords=e,this.searchResultList="",this.showSearchDetail=!0,this.$router.push({path:"/search/comprehensive",query:{key:this.keyWords}})},handleChange:function(e){var t="";t=""==this.keyWords?this.searchContent:this.keyWords,this.$router.push({path:"/search/"+e,query:{key:t}})}},beforeDestroy:function(){this.$bus.$off("handleChang")},watch:{searchContent:function(){this.searchContent.trim()&&this.showSearchResult?this.getSearch():this.showSearchResult=!0}}},S=m,p=(s("124e"),Object(f["a"])(S,a,i,!1,null,"633f55f4",null));t["default"]=p.exports},"498a":function(e,t,s){"use strict";var a=s("23e7"),i=s("58a8").trim,n=s("c8d2");a({target:"String",proto:!0,forced:n("trim")},{trim:function(){return i(this)}})},5899:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(e,t,s){var a=s("1d80"),i=s("577e"),n=s("5899"),r="["+n+"]",c=RegExp("^"+r+r+"*"),h=RegExp(r+r+"*$"),o=function(e){return function(t){var s=i(a(t));return 1&e&&(s=s.replace(c,"")),2&e&&(s=s.replace(h,"")),s}};e.exports={start:o(1),end:o(2),trim:o(3)}},b2fe:function(e,t,s){},c8d2:function(e,t,s){var a=s("d039"),i=s("5899"),n="​᠎";e.exports=function(e){return a((function(){return!!i[e]()||n[e]()!=n||i[e].name!==e}))}}}]);
//# sourceMappingURL=chunk-ebb07e02.4e23ad5f.js.map