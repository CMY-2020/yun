(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-15482a8e"],{"2f79":function(t,e,a){"use strict";a("f019")},"43d3":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"palyMv",style:{height:t.screenHeight+"px"}},[a("div",{staticClass:"header"},[a("span",{staticClass:"iconfont icon-arrowLeft",on:{click:t.back}}),a("span",{staticClass:"iconfont icon-MV"}),t._m(0)]),a("div",{staticClass:"video"},[a("video",{attrs:{id:"video",autoplay:"",controls:"",preload:"",src:t.mvUrl,height:"230",width:"100%"}}),t._m(1)]),a("div",{staticClass:"icon"},[a("span",{staticClass:"iconfont icon-dianzan1"}),a("br"),a("span",[t._v(t._s(t.likedCount))]),a("br"),a("span",{staticClass:"iconfont icon-pinglun1"}),a("br"),a("span",[t._v(t._s(t.commentCount))]),a("br"),a("span",{staticClass:"iconfont icon-fenxiang2"}),a("br"),a("span",[t._v(t._s(t.shareCount))]),a("br"),t._m(2),a("span",[t._v("收藏")])]),a("div",{staticClass:"info"},[a("div",{staticClass:"auther"},[a("img",{staticClass:"avator",attrs:{src:t.avatarUrl+"?param=100y100",alt:""}}),t._v("  "),a("p",{staticClass:"artistName"},[t._v(t._s(t.mvInfo.artistName))])]),a("br"),a("p",{staticClass:"name"},[t._v(t._s(t.mvInfo.name))]),a("br"),a("span",{staticClass:"count"},[t._v(t._s(t.mvInfo.playCount)+"次观看")])]),a("div",{staticClass:"divider"}),a("div",{staticClass:"footer"},[a("span",{staticClass:"iconfont icon-xin"}),a("p",{staticClass:"name2"},[t._v(t._s(t.mvInfo.name)+"-"+t._s(t.mvInfo.artistName))])])])},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"right"},[a("span",{staticClass:"iconfont icon-xiaoping"}),a("span",{staticClass:"iconfont icon-liebiao-dian"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"fz"},[a("span",{staticClass:"iconfont icon-fanzhuanpingmu"}),a("br")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"iconfont icon-tianjiashoucang"},[a("br")])}],i=a("1da1"),o=(a("96cf"),a("fd5d")),r=a("ff51"),c=a("08de"),l={data:function(){return{screenHeight:"",avatarUrl:"",mvInfo:[],shareCount:"",commentCount:"",likedCount:"",mvUrl:"",isSend:!1}},mounted:function(){window.onresize=function(){this.screenHeight=window.screen.height},this.mvInfo=this.$store.state.palyMvInfo},methods:{getData:function(){this.getUserAvatar(),this.getMVInfoData(),this.getMVUrlData()},back:function(){this.$store.state.showPlayMv=!1,this.$bus.$emit("closeModle"),this.isSend=!0,this.$store.state.showControlBar=!0},getUserAvatar:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(c["a"])(t.mvInfo.id);case 3:a=e.sent,s=a.data,t.avatarUrl=s.profile.avatarUrl,e.next=12;break;case 8:e.prev=8,e.t0=e["catch"](0),console.log("用户头像请求失败，已启用默认头像"),t.avatarUrl="https://img0.baidu.com/it/u=797324285,1943411797&fm=26&fmt=auto&gp=0.jpg";case 12:case"end":return e.stop()}}),e,null,[[0,8]])})))()},getMVInfoData:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(o["a"])(t.mvInfo.id);case 2:a=e.sent,t.likedCount=Object(r["b"])(a.data.likedCount),t.commentCount=Object(r["b"])(a.data.commentCount),t.shareCount=Object(r["b"])(a.data.shareCount);case 6:case"end":return e.stop()}}),e)})))()},getMVUrlData:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(o["c"])(t.mvInfo.id);case 2:a=e.sent,t.mvUrl=a.data.data.url;case 4:case"end":return e.stop()}}),e)})))()}},beforeDestroy:function(){},computed:{isPlayMv:function(){return this.$store.state.showPlayMv}},watch:{isPlayMv:function(){if(this.mvInfo=this.$store.state.palyMvInfo,!this.$store.state.showPlayMv){var t=document.querySelector("#video");t.pause()}}}},u=l,f=(a("fb13"),a("2877")),v=Object(f["a"])(u,s,n,!1,null,"3c4719a4",null);e["a"]=v.exports},"73cb":function(t,e,a){"use strict";a("b038")},b038:function(t,e,a){},df09:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"newSongs"},[a("div",{directives:[{name:"show",rawName:"v-show",value:!t.$store.state.showPlayMv,expression:"!$store.state.showPlayMv"}],staticClass:"header"},[a("i",{staticClass:"iconfont icon-arrowLeft",on:{click:t.backIndex}}),a("span",{staticClass:"text"},[t._v("MV排行榜")])]),a("div",{staticClass:"navtab"},[a("van-tabs",{attrs:{sticky:"","offset-top":"50"},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("van-tab",{attrs:{title:"内地",name:"内地"}},[a("publicComps",{attrs:{area:t.activeName}})],1),a("van-tab",{attrs:{title:"港台",name:"港台"}},[a("publicComps",{attrs:{area:t.activeName}})],1),a("van-tab",{attrs:{title:"欧美",name:"欧美"}},[a("publicComps",{attrs:{area:t.activeName}})],1),a("van-tab",{attrs:{title:"韩国",name:"韩国"}},[a("publicComps",{attrs:{area:t.activeName}})],1),a("van-tab",{attrs:{title:"日本",name:"日本"}},[a("publicComps",{attrs:{area:t.activeName}})],1)],1)],1)])},n=[],i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mvTop"},[""==t.mvList?a("van-loading",{staticClass:"loading",attrs:{"text-color":"#999",color:"red",type:"spinner",size:"24px"}},[t._v("正在加载...")]):t._e(),""!=t.mvList?a("van-list",{attrs:{"immediate-check":!1,finished:t.finished,"finished-text":"查看更多请前往网易云APP~"},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.mvList,(function(e,s){return a("div",{key:e.id,staticClass:"top-item"},[a("div",{staticClass:"img",on:{click:function(e){return t.playMv(s)}}},[a("img",{attrs:{src:e.cover,alt:""}}),a("span"),a("span",{staticClass:"iconfont icon-caret-right"},[t._v(t._s(e.playCount))])]),a("div",{staticClass:"name"},[a("span",{class:["index",0==s||1==s||2==s?"top-color":""]},[t._v(t._s(s+1))]),a("p",{staticClass:"mv-name"},[t._v(t._s(e.name))])]),a("div",{staticClass:"auther"},[a("span",{staticClass:"line"},[t._v("-")]),a("p",{staticClass:"mv-auther"},[t._v(t._s(e.artistName))])])])})),0):t._e(),a("van-popup",{style:{height:"100%",width:"100%"},model:{value:t.$store.state.showPlayMv,callback:function(e){t.$set(t.$store.state,"showPlayMv",e)},expression:"$store.state.showPlayMv"}},[t.$store.state.showPlayMv?a("playMv",{ref:"getData"}):t._e()],1)],1)},o=[],r=a("b85c"),c=a("1da1"),l=(a("96cf"),a("b0c0"),a("fd5d")),u=a("ff51"),f=a("43d3"),v={components:{playMv:f["a"]},data:function(){return{mvList:[],offset:0,loading:!1,finished:!1,onLoadCount:0,hasMore:!0,resultLength:1,topOffset:"0"}},mounted:function(){this.getMVTopData(),this.$bus.$on("closeModle",this.closeModle)},methods:{getMVTopData:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var a,s,n,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.hasMore&&0!=t.resultLength){e.next=3;break}return t.finished=!0,e.abrupt("return");case 3:return e.next=5,Object(l["b"])(t.area,5,t.offset);case 5:a=e.sent,t.resultLength=a.data.data.length,t.hasMore=a.data.hasMore,s=Object(r["a"])(a.data.data);try{for(s.s();!(n=s.n()).done;)i=n.value,t.mvList.push({id:i.id,name:i.name,cover:i.cover,artistName:i.artistName,playCount:Object(u["b"])(i.playCount)})}catch(o){s.e(o)}finally{s.f()}t.offset+=5,t.loading=!1;case 12:case"end":return e.stop()}}),e)})))()},onLoad:function(){var t=this;++this.onLoadCount>=9?this.finished=!0:setTimeout((function(){t.getMVTopData()}),2e3)},playMv:function(t){var e=this;this.$store.state.isPlaying=!0,this.$bus.$emit("handlePlay"),this.$store.state.palyMvInfo=this.mvList[t],this.$store.state.showPlayMv=!0,this.stopBodyScroll(!0),setTimeout((function(){e.$refs.getData.getData()}),1500),document.body.addEventListener("touchmove",this.bodyScroll,{passive:!1}),document.querySelector("body").style.position="fixed",document.querySelector("body").style.width="100%",this.$store.state.showControlBar=!1},bodyScroll:function(t){t.preventDefault()},stopBodyScroll:function(t){var e=document.querySelector("body");t?(this.topOffset=window.scrollY,e.style.position="fixed",e.style.top=-this.topOffset+"px"):(e.style.position="",window.scrollTo(0,this.topOffset))},closeModle:function(){this.stopBodyScroll(!1),document.body.removeEventListener("touchmove",this.bodyScroll,{passive:!1}),document.querySelector("body").style.position="initial",document.querySelector("body").style.height="auto"}},beforeDestroy:function(){this.$bus.$off("closeModlecloseModle")},props:{area:{type:String}}},d=v,m=(a("73cb"),a("2877")),p=Object(m["a"])(d,i,o,!1,null,"2ab86071",null),h=p.exports,b={components:{publicComps:h},data:function(){return{activeName:"a"}},methods:{backIndex:function(){this.$router.go(-1)}}},C=b,y=(a("2f79"),Object(m["a"])(C,s,n,!1,null,"f9571fb2",null));e["default"]=y.exports},ee7c:function(t,e,a){},f019:function(t,e,a){},fb13:function(t,e,a){"use strict";a("ee7c")},fd5d:function(t,e,a){"use strict";a.d(e,"b",(function(){return n})),a.d(e,"a",(function(){return i})),a.d(e,"c",(function(){return o}));var s=a("23a8");function n(t,e,a){return Object(s["a"])({url:"/top/mv",params:{area:t,limit:e,offset:a}})}function i(t){return Object(s["a"])({url:"/mv/detail/info",params:{mvid:t}})}function o(t){return Object(s["a"])({url:"/mv/url",params:{id:t}})}}}]);
//# sourceMappingURL=chunk-15482a8e.3841ca28.js.map